<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="AC_GATEWAY_VIEW">
  <resultMap class="com.megaeyes.persistence.ibatis.model.AcGateway" id="abatorgenerated_AcGatewayResult">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue May 17 10:32:32 CST 2011.
    -->
    <result column="ID" jdbcType="VARCHAR" property="id" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="LAN_IP" jdbcType="VARCHAR" property="lanIp" />
    <result column="WAN_IP" jdbcType="VARCHAR" property="wanIp" />
    <result column="INSTALL_LOCATION" jdbcType="VARCHAR" property="installLocation" />
    <result column="NOTE" jdbcType="VARCHAR" property="note" />
    <result column="NAMING" jdbcType="VARCHAR" property="naming" />
    <result column="PORT" jdbcType="DECIMAL" property="port" />
    <result column="DEVICE_NUMBER" jdbcType="VARCHAR" property="deviceNumber" />
    <result column="ORGAN_ID" jdbcType="VARCHAR" property="organId" />
  </resultMap>
  
  <select id="countAcGateway" resultClass="java.lang.Integer">
  	select count(*) from ac_gateway 
	where 1=1
	<isNotEmpty prepend="and" property="organId">
		organ_id = #organId:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="name">
		name like '%$name$%'
	</isNotEmpty>
	<isNotEmpty prepend="and" property="deviceNumber">
		device_number = #deviceNumber:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="wanIp">
		wan_ip = #wanIp:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="lanIp">
		lan_ip = #lanIp:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="installLocation">
		install_location = #installLocation:VARCHAR#
	</isNotEmpty>
  </select>
  
  <select id="listAcGateway" resultMap="abatorgenerated_AcGatewayResult">
  	select b.* from 
  	(select a.*, rownum as rid from ac_gateway a 
  	where 1=1
	<isNotEmpty prepend="and" property="organId">
		organ_id = #organId:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="name">
		name like '%$name$%'
	</isNotEmpty>
	<isNotEmpty prepend="and" property="deviceNumber">
		device_number = #deviceNumber:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="wanIp">
		wan_ip = #wanIp:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="lanIp">
		lan_ip = #lanIp:VARCHAR#
	</isNotEmpty>
	<isNotEmpty prepend="and" property="installLocation">
		install_location = #installLocation:VARCHAR#
	</isNotEmpty>
	and rownum <![CDATA[<]]> #end#) b 
	where b.rid >= #begin#
  </select>
</sqlMap>