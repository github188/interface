<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="ALARM_INPUT_CHANNEL_VIEW">
	<resultMap id="abatorgenerated_AlarmInputChannelResult"
		class="com.megaeyes.persistence.ibatis.model.AlarmInputChannel">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Oct 15 04:57:33 GMT 2009. -->
		<result column="ID" jdbcType="VARCHAR" property="id" />
    <result column="OPTIMISTIC_LOCK" jdbcType="DECIMAL" property="optimisticLock" />
    <result column="F_NAME" jdbcType="VARCHAR" property="name" />
    <result column="NAMING" jdbcType="VARCHAR" property="naming" />
    <result column="INSTALL_LOCATION" jdbcType="VARCHAR" property="installLocation" />
    <result column="NOTE" jdbcType="VARCHAR" property="note" />
    <result column="ALARM_BOX_ID" jdbcType="VARCHAR" property="alarmBoxId" />
    <result column="ADDRESS_NUMBER_ON_ALARM_BOX" jdbcType="VARCHAR" property="addressNumberOnAlarmBox" />
    <result column="ALARM_INPUT_CHANNEL_TYPE_ID" jdbcType="VARCHAR" property="alarmInputChannelTypeId" />
    <result column="ORGAN_ID" jdbcType="VARCHAR" property="organId" />
    <result column="DEVICE_PHYSICAL_RELATION_ID" jdbcType="VARCHAR" property="devicePhysicalRelationId" />
    <result column="IS_SUPPORT_SCHEME" jdbcType="DECIMAL" property="isSupportScheme" />
    <result column="IS_SHARE" jdbcType="DECIMAL" property="isShare" />
    <result column="CHANNEL_ID" jdbcType="DECIMAL" property="channelId" />
    <result column="ALARM_STORAGE_SERVER_ID" jdbcType="VARCHAR" property="alarmStorageServerId" />
  </resultMap>

	<select id="listAlarmInPutByOrganId" resultMap="abatorgenerated_AlarmInputChannelResult">
		select * from
		alarm_input_channel where organ_id in (select id from organ
		where path
		like '%$organId$%')
	</select>

	<resultMap class="com.megaeyes.persistence.ibatis.vo.AlarmInputChannelVO"
		id="ListAICVO" extends="ALARM_INPUT_CHANNEL_VIEW.abatorgenerated_AlarmInputChannelResult">
		<result column="SIP_CODE" property="sipCode" jdbcType="VARCHAR" />
		<result column="LONGITUDE" property="longitude" jdbcType="VARCHAR" />
		<result column="LATITUDE" property="latitude" jdbcType="VARCHAR" />
	</resultMap>

	<select id="listAlarmInputChannel" resultMap="ListAICVO">
		select a.ID,
		a.OPTIMISTIC_LOCK, a.F_NAME, a.NAMING, a.INSTALL_LOCATION,
		a.NOTE,
		a.ALARM_BOX_ID,
		a.ADDRESS_NUMBER_ON_ALARM_BOX,
		a.ALARM_INPUT_CHANNEL_TYPE_ID, a.ORGAN_ID,
		a.DEVICE_PHYSICAL_RELATION_ID, a.IS_SUPPORT_SCHEME,
		a.IS_SHARE,a.channel_id,a.alarm_storage_server_id,b.sip_code,b.longitude,b.latitude
		from
		ALARM_INPUT_CHANNEL a left join PLATFORM_RESOURCES b on a.id=b.resource_id
		where a.ALARM_BOX_ID = #alarmBoxId:VARCHAR#
	</select>

	<select id="listRegisteredAlarmInputChannel" resultMap="abatorgenerated_AlarmInputChannelResult">
		select
		ID, OPTIMISTIC_LOCK, F_NAME, NAMING, INSTALL_LOCATION, NOTE,
		ALARM_BOX_ID,
		ADDRESS_NUMBER_ON_ALARM_BOX, ALARM_INPUT_CHANNEL_TYPE_ID,
		ORGAN_ID,
		DEVICE_PHYSICAL_RELATION_ID, IS_SUPPORT_SCHEME, IS_SHARE
		from
		ALARM_INPUT_CHANNEL
		where ALARM_BOX_ID = #alarmBoxId:VARCHAR#
		and NAMING
		is not null
	</select>

	<resultMap class="com.megaeyes.persistence.ibatis.vo.AlarmInputChannelVO"
		id="AICVO" extends="ALARM_INPUT_CHANNEL_VIEW.abatorgenerated_AlarmInputChannelResult">
		<result column="subdivision_name" property="subdivision_name"
			jdbcType="DECIMAL" />
		<result column="ep_codeid" property="ep_codeid" jdbcType="VARCHAR" />
	</resultMap>

</sqlMap>