<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="ALARM_OUTPUT_CHANNEL_VIEW">
	<resultMap id="abatorgenerated_AlarmOutputChannelResult"
		class="com.megaeyes.persistence.ibatis.model.AlarmOutputChannel">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Oct 15 04:58:00 GMT 2009. -->
		<result column="ID" jdbcType="VARCHAR" property="id" />
    <result column="OPTIMISTIC_LOCK" jdbcType="DECIMAL" property="optimisticLock" />
    <result column="F_NAME" jdbcType="VARCHAR" property="name" />
    <result column="NAMING" jdbcType="VARCHAR" property="naming" />
    <result column="INSTALL_LOCATION" jdbcType="VARCHAR" property="installLocation" />
    <result column="NOTE" jdbcType="VARCHAR" property="note" />
    <result column="ALARM_BOX_ID" jdbcType="VARCHAR" property="alarmBoxId" />
    <result column="ADDRESS_NUMBER_ON_ALARM_BOX" jdbcType="VARCHAR" property="addressNumberOnAlarmBox" />
    <result column="ALARM_OUTPUT_CHANNEL_TYPE_ID" jdbcType="VARCHAR" property="alarmOutputChannelTypeId" />
    <result column="ORGAN_ID" jdbcType="VARCHAR" property="organId" />
    <result column="DEVICE_PHYSICAL_RELATION_ID" jdbcType="VARCHAR" property="devicePhysicalRelationId" />
    <result column="IS_SUPPORT_SCHEME" jdbcType="SMALLINT" property="isSupportScheme" />
    <result column="IS_SHARE" jdbcType="INTEGER" property="isShare" />
    <result column="CHANNEL_ID" jdbcType="SMALLINT" property="channelId" />
  </resultMap>

	<select id="listAlarmOutPutByOrganId" resultMap="abatorgenerated_AlarmOutputChannelResult">
		select * from
		alarm_output_channel where organ_id in (select id from organ
		where path
		like '%$organId$%')
	</select>

	<select id="listAlarmOutputChannel" resultMap="abatorgenerated_AlarmOutputChannelResult">
		select ID,
		OPTIMISTIC_LOCK, F_NAME, NAMING, INSTALL_LOCATION, NOTE,
		ALARM_BOX_ID,
		ADDRESS_NUMBER_ON_ALARM_BOX, ALARM_OUTPUT_CHANNEL_TYPE_ID, ORGAN_ID,
		DEVICE_PHYSICAL_RELATION_ID, IS_SUPPORT_SCHEME, IS_SHARE, CHANNEL_ID
		from
		ALARM_OUTPUT_CHANNEL
		where ALARM_BOX_ID = #alarmBoxId:VARCHAR#
	</select>


	<select id="listAlarmOutputChannelByOrganId" resultMap="abatorgenerated_AlarmOutputChannelResult">
		select ID, OPTIMISTIC_LOCK, F_NAME, NAMING, INSTALL_LOCATION, NOTE,
		ALARM_BOX_ID,
		ADDRESS_NUMBER_ON_ALARM_BOX,
		ALARM_OUTPUT_CHANNEL_TYPE_ID, ORGAN_ID,
		DEVICE_PHYSICAL_RELATION_ID,
		IS_SUPPORT_SCHEME, IS_SHARE
		FROM (
		select ID, OPTIMISTIC_LOCK, F_NAME,
		NAMING, INSTALL_LOCATION, NOTE,
		ALARM_BOX_ID,
		ADDRESS_NUMBER_ON_ALARM_BOX, ALARM_OUTPUT_CHANNEL_TYPE_ID, ORGAN_ID,
		DEVICE_PHYSICAL_RELATION_ID, IS_SUPPORT_SCHEME, IS_SHARE,ROWNUM ER
		FROM ALARM_OUTPUT_CHANNEL
		WHERE ORGAN_ID = #organId#
		<isNotEmpty prepend="and" property="name">
			F_NAME like '%$name$%'
		</isNotEmpty>
		) WHERE ROWNUM<![CDATA[ <]]>=#limit#
		AND ER>#start#
	</select>

	<select id="listRegisteredAlarmOutputChannel" resultMap="abatorgenerated_AlarmOutputChannelResult">
		select
		ID, OPTIMISTIC_LOCK, F_NAME, NAMING, INSTALL_LOCATION, NOTE,
		ALARM_BOX_ID,
		ADDRESS_NUMBER_ON_ALARM_BOX,
		ALARM_OUTPUT_CHANNEL_TYPE_ID, ORGAN_ID,
		DEVICE_PHYSICAL_RELATION_ID,
		IS_SUPPORT_SCHEME, IS_SHARE
		from ALARM_OUTPUT_CHANNEL
		where ALARM_BOX_ID
		= #alarmBoxId:VARCHAR#
		and NAMING is not null
	</select>



</sqlMap>