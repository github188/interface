<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="SIP_SERVER_VIEW">
	
	 <resultMap id="_SipServerResult" class="com.megaeyes.persistence.ibatis.model.SipServer" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Jun 12 14:32:41 CST 2012.
    -->
    <result column="ID" property="id" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="LAN_IP" property="lanIp" jdbcType="VARCHAR" />
    <result column="HTTP_PORT" property="httpPort" jdbcType="DECIMAL" />
    <result column="HEARTBEAT_TIME" property="heartbeatTime" jdbcType="DECIMAL" />
    <result column="DEVICE_NUMBER" property="deviceNumber" jdbcType="VARCHAR" />
    <result column="REGISTER_TYPE" property="registerType" jdbcType="VARCHAR" />
    <result column="WAN_IP" property="wanIp" jdbcType="VARCHAR" />
    <result column="SIP_PORT" property="sipPort" jdbcType="DECIMAL" />
    <result column="MEGA_PORT" property="megaPort" jdbcType="DECIMAL" />
    <result column="EVENT_SERVER_ID" property="eventServerId" jdbcType="VARCHAR" />
    <result column="MEDIA_GATEWAY_SERVER_ID" property="mediaGatewayServerId" jdbcType="VARCHAR" />
  </resultMap>
	
	<update id="heartbeat" parameterClass="com.megaeyes.persistence.ibatis.model.SipServer">
		update sip_server set heartbeat_time = #heartbeatTime:DECIMAL# where device_number = #deviceNumber:VARCHAR#
	</update>
	
	<select id="listSipServer" resultMap="_SipServerResult">
		select * from sip_server 
	</select>
	
</sqlMap>